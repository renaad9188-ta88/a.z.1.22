# ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุณุงุฆููู

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ููุณุงุฆููู ูุชูุญ ููู:
- ุฅุฏุงุฑุฉ ุฎุทูุท ุงูุฑุญูุงุช ุงููุฑุจูุทุฉ ุจูู
- ุฅุถุงูุฉ/ุชุนุฏูู ููุงุท ุงูุชููู
- ุนุฑุถ ูุงุฆูุฉ ุงูุฑูุงุจ ูู ุฑุญูุงุชูู
- ุชุชุจุน ุงูุฑุญูุงุช ุนูู ุงูุฎุฑูุทุฉ

## ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุชูููุฐ SQL Scripts
```sql
-- ูู Supabase SQL Editorุ ููุฐ ุจุงูุชุฑุชูุจ:

-- 1. ุฅุถุงูุฉ ุฏูุฑ ุงูุณุงุฆู
\i supabase/ADD_DRIVER_ROLE.sql

-- 2. ุฅูุดุงุก ูุธุงู ุงูุฎุทูุท (ุฅุฐุง ูู ููู ูููุฐุงู)
\i supabase/CREATE_ROUTE_SYSTEM.sql

-- 3. ุฅูุดุงุก ุฌุฏุงูู ุงูุชุชุจุน (ุฅุฐุง ูู ููู ูููุฐุงู)
\i supabase/CREATE_TRIP_TRACKING_TABLES.sql
```

### 2. ุฅูุดุงุก ุณุงุฆู ุชุฌุฑูุจู
```sql
-- ูู Supabase SQL Editor:
-- ุงูุณุงุฆู ุงูุชุฌุฑูุจู: driver@example.com / driver123
-- ุชู ุฅูุดุงุคู ุชููุงุฆูุงู ูู ADD_DRIVER_ROLE.sql
```

### 3. ุฑุจุท ุงูุณุงุฆู ุจุฎุท
```sql
-- ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ (/admin):
1. ุงุฐูุจ ุฅูู "ุฅุฏุงุฑุฉ ุงูุฎุทูุท"
2. ุงุฎุชุฑ ุงูุฎุท ุงููุทููุจ (ูุซู "ุฏูุดู - ุนูุงู")
3. ูู ูุณู "ุงูุณุงุฆููู ุงููุฑุจูุทูู"ุ ุงุณุชุฎุฏู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
4. ุงุฎุชุฑ "ุณุงุฆู ุชุฌุฑูุจู" ูุงุถุบุท ููุงููุฉ
```

## ุงุณุชุฎุฏุงู ุงููุธุงู

### ุชุณุฌูู ุฏุฎูู ุงูุณุงุฆู
```
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: driver@example.com
ูููุฉ ุงููุฑูุฑ: driver123
```

### ูุงุฌูุฉ ุงูุณุงุฆู
ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุณูุชู ุชูุฌูู ุงูุณุงุฆู ุชููุงุฆูุงู ุฅูู `/driver`

#### ุงูููุงุฆู ุงูุฑุฆูุณูุฉ:
1. **ุฎุทูุท ุงูุฑุญูุงุช**: ุนุฑุถ ูุฅุฏุงุฑุฉ ุงูุฎุทูุท ุงููุฑุจูุทุฉ
2. **ุงูุฑูุงุจ**: ุนุฑุถ ูุงุฆูุฉ ุงูุฑูุงุจ ูู ุงูุฑุญูุงุช

### ุฅุฏุงุฑุฉ ุงูุฎุทูุท
- **ุนุฑุถ ุงูุฎุทูุท**: ูุฑู ุงูุณุงุฆู ููุท ุงูุฎุทูุท ุงููุฑุจูุทุฉ ุจู
- **ุฅุถุงูุฉ ููุงุท ุชููู**: ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ููุงุท ุงูุชููู ููู ุฎุท
- **ุชูุงุตูู ุงูุฎุท**: ููุทุฉ ุงูุงูุทูุงูุ ููุงุท ุงูุชูููุ ููุทุฉ ุงููุตูู

### ุฅุฏุงุฑุฉ ุงูุฑูุงุจ
- **ูุงุฆูุฉ ุงูุฑูุงุจ**: ุนุฑุถ ุฌููุน ุงูุฑูุงุจ ูู ุฎุทูุท ุงูุณุงุฆู
- **ุชูุงุตูู ุงูุฑุงูุจ**: ูุนูููุงุช ุดุฎุตูุฉุ ูุฑุงููููุ ููุทุฉ ุงููุฒูู
- **ุชุชุจุน ุงูุฑุญูุฉ**: ุฎุฑูุทุฉ ุชูุงุนููุฉ ูุชุชุจุน ูููุน ุงูุฑุญูุฉ
- **ุญุงูุฉ ุงูุฑุญูุฉ**: ูู ุงูุทุฑูู / ูุตู

### ุตูุงุญูุงุช ุงูุณุงุฆู
```sql
-- ุงูุณุงุฆู ููููู:
โ ูุฑุงุกุฉ ูููู ุงูุดุฎุตู
โ ุชุญุฏูุซ ูููู ุงูุดุฎุตู
โ ูุฑุงุกุฉ ุงูุฎุทูุท ุงููุฑุจูุทุฉ ุจู
โ ุฅุฏุงุฑุฉ ููุงุท ุงูุชููู ูู ุฎุทูุทู
โ ูุฑุงุกุฉ ุทูุจุงุช ุงูุฑูุงุจ ูู ุฎุทูุทู
โ ุชุญุฏูุซ ูููุน ุงูุฑุญูุฉ ุงูุญุงูู
โ ุฅุฏุงุฑุฉ ููุงุท ุงูุชููู ุงููุฎุตุตุฉ ูุฑุญูุงุชู

-- ุงูุณุงุฆู ูุง ููููู:
โ ุฅูุดุงุก ุฎุทูุท ุฌุฏูุฏุฉ (ููุนููุง ุงูุฅุฏูู ููุท)
โ ุฑุจุท ุงูุณุงุฆููู ุจุงูุฎุทูุท (ููุนููุง ุงูุฅุฏูู ููุท)
โ ุชุนุฏูู ุทูุจุงุช ุงูุฑูุงุจ
โ ุงููุตูู ููุงุฌูุฉ ุงูุฅุฏุงุฑุฉ
```

## ุฅูุดุงุก ุณุงุฆู ุฌุฏูุฏ

### 1) ุฅุถุงูุฉ ุงูุณุงุฆู ูู โุณุฌูโ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ููุธูุฑ ูู ุงูุฅุฏุงุฑุฉ)
- **ุงูููุงู**: `/admin` โ ุฒุฑ **ุฅุฏุงุฑุฉ ุงูุฎุทูุท** โ **ุฅุถุงูุฉ ุณุงุฆู**
- ูุฐุง ููุดุฆ ุตู ูู ุฌุฏูู `public.drivers` (ุงุณู/ูุงุชู/ููุน ูุฑูุจุฉ/ููุงุนุฏ)
- ุจุนุฏ ุงูุฅุถุงูุฉ ุณูุธูุฑ ุงูุณุงุฆู:
  - ูู ููุณ ุตูุญุฉ ุงูุฅุฏุงุฑุฉ ุถูู ูุงุฆูุฉ โุฅุถุงูุฉ ุณุงุฆู...โ ูุฑุจุทู ุจุฎุท
  - ููู ุตูุญุงุช ุงูุฎุฑูุทุฉ ุงูุชู ุชุนุฑุถ ุงูุณุงุฆููู (ุนุฑุถ ุชุฌุฑูุจู)

### 2) ุฅูุดุงุก ุญุณุงุจ ุฏุฎูู ููุณุงุฆู (ูููุฏุฑ ูุฏุฎู ุนูู ููุญุฉ ุงูุณุงุฆู `/driver`)
> ููุงุญุธุฉ: **ุฅูุดุงุก ูุณุชุฎุฏู ุฏุงุฎู `auth.users` ุนุจุฑ SQL ุบูุฑ ููุตู ุจู** ูู Supabase. ุงุณุชุฎุฏู ููุญุฉ Supabase.

#### (ุฃ) ุฅูุดุงุก ุญุณุงุจ ูู Supabase Dashboard
1. Supabase โ **Authentication** โ **Users**
2. **Add user** (Create new user)
3. ุฃุฏุฎู Email + Password
4. ุงูุณุฎ **User UID**

#### (ุจ) ุชุนูููู ูู Driver ูู profiles
ูููุฐ ูู SQL Editor (ุจุฏูู ุงูููู):

```sql
INSERT INTO public.profiles (user_id, full_name, phone, role)
VALUES (
  'USER_UID_HERE'::uuid,
  'ุงุณู ุงูุณุงุฆู',
  '+9627xxxxxxxx',
  'driver'
)
ON CONFLICT (user_id) DO UPDATE
SET role = 'driver', full_name = EXCLUDED.full_name, phone = EXCLUDED.phone;
```

#### (ุฌ) ุฑุจุท ุญุณุงุจ ุงูุณุงุฆู ุจุณุฌู `drivers`
ูููุฐ ูุฑุฉ ูุงุญุฏุฉ ุจุนุฏ ุชุดุบูู ุณูุฑุจุช ุงูุฑุจุท `supabase/LINK_DRIVERS_TO_AUTH.sql`:

```sql
UPDATE public.drivers
SET user_id = 'USER_UID_HERE'::uuid
WHERE phone = '+9627xxxxxxxx';
```

### 3) ุฑุจุท ุงูุณุงุฆู ุจุฎุท
- ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ `/admin` โ **ุฅุฏุงุฑุฉ ุงูุฎุทูุท** โ ุงุฎุชุฑ ุงูุฎุท โ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ **ุฅุถุงูุฉ ุณุงุฆู...**
- ุฃู ุนุจุฑ SQL (ุจุฏูู ุงูููู):

```sql
INSERT INTO public.route_drivers (route_id, driver_id, is_active)
SELECT r.id, d.id, true
FROM public.routes r
JOIN public.drivers d ON d.phone = '+9627xxxxxxxx'
WHERE r.name = 'ุฏูุดู - ุนูุงู'
ON CONFLICT ON CONSTRAINT route_drivers_route_id_driver_id_key DO NOTHING;
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุณุงุฆู ูุง ูุฑู ุงูุฎุทูุท
- ุชุฃูุฏ ูู ุฑุจุท ุงูุณุงุฆู ุจุงูุฎุท ูู `route_drivers`
- ุชุฃูุฏ ูู ุฃู ุงูุฎุท ูุดุท (`is_active = true`)

### ุงูุณุงุฆู ูุง ูุฑู ุงูุฑูุงุจ
- ุชุฃูุฏ ูู ูุฌูุฏ ุทูุจุงุช ุฑูุงุจ ููุจููุฉ (`status = 'approved'`)
- ุชุฃูุฏ ูู ูุฌูุฏ `request_dropoff_points` ููุทูุจุงุช
- ุชุฃูุฏ ูู ุฃู ุงูุทูุจ ูุฑุชุจุท ุจุฎุท ุงูุณุงุฆู

### ูุดุงูู ูู ุงูุฎุฑูุทุฉ
- ุชุฃูุฏ ูู ูุฌูุฏ `NEXT_PUBLIC_GOOGLE_MAPS_API_KEY`
- ุชุฃูุฏ ูู ูุฌูุฏ `request_dropoff_points` ููุทูุจ

## ุงููููุงุช ุงูุฌุฏูุฏุฉ

### ุตูุญุงุช
- `app/driver/page.tsx` - ููุญุฉ ุชุญูู ุงูุณุงุฆู
- `app/driver/profile/page.tsx` - ุฅุนุฏุงุฏุงุช ุงูุณุงุฆู
- `app/driver/passenger/[id]/page.tsx` - ุชูุงุตูู ุงูุฑุงูุจ
- `app/driver/passenger/[id]/track/page.tsx` - ุชุชุจุน ุงูุฑุญูุฉ

### ููููุงุช
- `components/driver/DriverRoutes.tsx` - ุฅุฏุงุฑุฉ ุงูุฎุทูุท
- `components/driver/DriverPassengers.tsx` - ูุงุฆูุฉ ุงูุฑูุงุจ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `supabase/ADD_DRIVER_ROLE.sql` - ุฅุถุงูุฉ ุฏูุฑ ุงูุณุงุฆู
- `supabase/CREATE_ROUTE_SYSTEM.sql` - ูุธุงู ุงูุฎุทูุท

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุงูุณุงุฆู ูุฑู ููุท ุจูุงูุงุช ุฎุทูุทู ููุง ููููู ุชุนุฏูู ุจูุงูุงุช ุงูุฑูุงุจ
2. **ุงูุชููู**: ุงูุณุงุฆู ูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู `/driver` ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
3. **ุงูุฅุดุนุงุฑุงุช**: ุงูุณุงุฆู ูุชููู ุฅุดุนุงุฑุงุช ุญูู ุงูุฑุญูุงุช ุงูุฌุฏูุฏุฉ ูู ุฎุทูุทู
4. **ุงูุชุชุจุน**: ูููู ุชุชุจุน ูููุน ุงูุฑุญูุฉ ุงูุญูุฉ ูู ูุจู ุงูุณุงุฆู ูุงูุฑูุงุจ

## ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

1. ุณุฌู ุฏุฎูู ูุณุงุฆู: `driver@example.com` / `driver123`
2. ุชุญูู ูู ุชูุฌููู ุฅูู `/driver`
3. ุฃุถู ููุงุท ุชููู ููุฎุท
4. ุฃูุดุฆ ุทูุจ ุฑุญูุฉ ููุณุชุฎุฏู ุนุงุฏู
5. ุชุญูู ูู ุธููุฑ ุงูุทูุจ ูู ูุงุฆูุฉ ุฑูุงุจ ุงูุณุงุฆู
6. ุฌุฑุจ ุชุชุจุน ุงูุฑุญูุฉ ูู ุตูุญุฉ ุงูุฑุงูุจ

---

**ุชู ุฅูุดุงุก ุงููุธุงู ุจุงููุงูู ููู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
