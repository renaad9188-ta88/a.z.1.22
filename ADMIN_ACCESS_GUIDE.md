# ุฏููู ุงููุตูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

## ๐ ุฑุงุจุท ููุญุฉ ุงูุฅุฏุงุฑุฉ

**ุงูุฑุงุจุท ุงููุจุงุดุฑ:** `http://localhost:3000/admin`

ุฃู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุณูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู `/admin` ุฅุฐุง ููุช ุฅุฏุงุฑูุงู.

---

## ๐ ุฎุทูุงุช ุชุณุฌูู ุงูุฏุฎูู ูุฅุฏุงุฑู

### 1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- ุงูุฑุงุจุท: `http://localhost:3000/auth/login`

### 2. ุงุฎุชุฑ "ุฅูููู (ุฅุฏุงุฑู)"
- ุงุถุบุท ุนูู ุฒุฑ "ุฅูููู (ุฅุฏุงุฑู)" ูู ุฃุนูู ุงููููุฐุฌ

### 3. ุฃุฏุฎู ุจูุงูุงุช ุงูุฏุฎูู
- **ุงูุฅูููู:** `tamer88@gmail.com`
- **ูููุฉ ุงููุฑูุฑ:** `123456123`

### 4. ุงุถุบุท "ุชุณุฌูู ุงูุฏุฎูู"
- ุณูุชู ุชูุฌููู ุชููุงุฆูุงู ุฅูู `/admin`

---

## ๐ง ุฅูุดุงุก ูุณุชุฎุฏู ุฅุฏุงุฑู ุฌุฏูุฏ

### ุงูุทุฑููุฉ 1: ุฅูุดุงุก ูุณุชุฎุฏู ุฅุฏุงุฑู ูุจุงุดุฑุฉ ูู Supabase Dashboard (ููุตู ุจู)

#### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงููุณุชุฎุฏู
1. ุงุฐูุจ ุฅูู **Supabase Dashboard**
2. **Authentication** > **Users**
3. ุงุถุบุท **Add User** > **Create new user**
4. ุงููุฃ ุงูุจูุงูุงุช:
   - **Email**: `phone_tamer88@maidaa.local` (ุฃู ุฃู ุฅูููู ุชุฑูุฏู)
   - **Password**: (ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ)
   - **User Metadata** (JSON):
     ```json
     {
       "full_name": "tamer88",
       "phone": "963XXXXXXXXX"
     }
     ```
5. ุงุถุบุท **Create user**
6. ุงูุณุฎ **User UID** ุงูุฐู ุณูุธูุฑ

#### ุงูุฎุทูุฉ 2: ุชุนูููู ูุฅุฏุงุฑู
1. ุงุฐูุจ ุฅูู **SQL Editor**
2. ููุฐ ูุฐุง ุงูุฃูุฑ (ุงุณุชุจุฏู `USER_ID_FROM_AUTH_USERS` ุจุงูู User UID):
   ```sql
   INSERT INTO profiles (user_id, full_name, phone, role)
   SELECT id, 'tamer88', 'tamer88', 'admin'
   FROM auth.users
   WHERE id = 'USER_ID_FROM_AUTH_USERS'::uuid
   ON CONFLICT (user_id) DO UPDATE SET role = 'admin';
   ```

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู ูุณุชุฎุฏู ููุฌูุฏ

ุฅุฐุง ูุงู ูุฏูู ุญุณุงุจ ุขุฎุฑ ูุณุฌู:

1. ุณุฌู ุงูุฏุฎูู ุจูุฐุง ุงูุญุณุงุจ
2. ุงุฐูุจ ุฅูู `/admin`
3. ุฅุฐุง ูู ุชุนููุ ููุฐ ูุฐุง ุงูุฃูุฑ ูู SQL Editor:
   ```sql
   -- ุงุณุชุจุฏู 'USER_ID_HERE' ุจูุนุฑู ุงููุณุชุฎุฏู
   UPDATE profiles 
   SET role = 'admin' 
   WHERE user_id = 'USER_ID_HERE'::uuid;
   ```

---

## โ๏ธ ุญู ูุดููุฉ ุฎุทุฃ 500

ุฅุฐุง ุธูุฑ ุฎุทุฃ 500 ุนูุฏ ูุญุงููุฉ ูุชุญ ููุญุฉ ุงูุฅุฏุงุฑุฉุ ูููุฐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### ุงูุฎุทูุฉ 1: ูููุฐ ููู SQL ุงูุฅุตูุงุญู

1. ุงุฐูุจ ุฅูู **Supabase Dashboard** > **SQL Editor**
2. ุงูุชุญ ููู `supabase/FIX_RLS_SIMPLE_FINAL.sql`
3. ุงูุณุฎ ูู ุงููุญุชูู ูุงูุตูู ูู SQL Editor
4. ุงุถุบุท **Run**

ูุฐุง ุงูููู ุณูููู ุจู:
- โ ุญุฐู ุงูุชูุฑุงุฑุงุช ูู `profiles`
- โ ุฅุถุงูุฉ UNIQUE constraint
- โ ุญุฐู ุฌููุน ุงูุณูุงุณุงุช ุงููุฏููุฉ
- โ ุฅูุดุงุก ุณูุงุณุงุช ุฌุฏูุฏุฉ ุตุญูุญุฉ
- โ ุฅูุดุงุก profile ูููุณุชุฎุฏู `tamer88@gmail.com` ูุชุนูููู ูุฅุฏุงุฑู

### ุงูุฎุทูุฉ 2: ุงูุณุญ Cache ุงููุชุตูุญ

1. ุงุถุบุท `Ctrl + Shift + Delete`
2. ุงุฎุชุฑ "Cached images and files"
3. ุงุถุบุท "Clear data"

ุฃู ุงุณุชุฎุฏู **Incognito Mode**:
- ุงุถุบุท `Ctrl + Shift + N`
- ุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

### ุงูุฎุทูุฉ 3: ุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

1. ุงุฐูุจ ุฅูู `/auth/login`
2. ุงุฎุชุฑ "ุฅูููู (ุฅุฏุงุฑู)"
3. ุฃุฏุฎู `tamer88@gmail.com` ู `123456123`
4. ุงุถุบุท "ุชุณุฌูู ุงูุฏุฎูู"

### ุงูุฎุทูุฉ 4: ุงุฐูุจ ุฅูู `/admin`

- ูุฌุจ ุฃู ุชุนูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ุงูุขู ุจุฏูู ุฃุฎุทุงุก

---

## ๐ ุงูุชุญูู ูู ุฃู ูู ุดูุก ูุนูู

ุจุนุฏ ุชูููุฐ ููู SQLุ ููููู ุงูุชุญูู ูู:

1. **ุงูุชุญูู ูู ุงููุณุชุฎุฏููู ุงูุฅุฏุงุฑููู:**
   ```sql
   SELECT p.user_id, p.full_name, p.role, u.email
   FROM profiles p
   LEFT JOIN auth.users u ON u.id = p.user_id
   WHERE p.role = 'admin';
   ```

2. **ุงูุชุญูู ูู ุงูุณูุงุณุงุช:**
   ```sql
   SELECT tablename, policyname
   FROM pg_policies 
   WHERE tablename IN ('profiles', 'visit_requests')
   ORDER BY tablename, policyname;
   ```

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. ุชุฃูุฏ ูู ุชูููุฐ ููู `FIX_RLS_SIMPLE_FINAL.sql` ุจุงููุงูู
2. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู `tamer88@gmail.com` ููุฌูุฏ ูู `auth.users`
3. ุชุฃูุฏ ูู ุฃู profile ููุฌูุฏ ูู `profiles` ูุน `role = 'admin'`
4. ุงูุณุญ Cache ุงููุชุตูุญ ุชูุงูุงู
5. ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู (`npm run dev`)

---

## ๐ฏ ุงูููุฒุงุช ุงููุชููุฑุฉ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

- โ ุนุฑุถ ุฌููุน ุทูุจุงุช ุงููุณุชุฎุฏููู
- โ ุงูุจุญุซ ูุงูุชุตููุฉ
- โ ุนุฑุถ ุชูุงุตูู ูู ุทูุจ
- โ ุนุฑุถ ุตูุฑ ุงูุฌูุงุฒุงุช ูุงูุฏูุนุงุช
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- โ ุงูุฑุฏ ุนูู ุงููุณุชุฎุฏููู
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ

---

**ุฑุงุจุท ููุญุฉ ุงูุฅุฏุงุฑุฉ:** `http://localhost:3000/admin`
